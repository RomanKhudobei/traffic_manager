{% extends 'base.html' %}

{% block title %}Статистика відвідувань{% endblock %}

{% block body %}

    {% include 'includes/header.html' %}

    <div class="container-xxl">

        <div class="row mt-3">
            <div class="col-sm-4"></div>

            <div class="col-sm-4">
                <form method="GET">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" style="width: 90%">
                        <input type="hidden" name="name" value="{{ source_name }}">
                        <select class="form-select" name="date" onchange="this.form.submit()">
                            {% for date in dates %}
                                <option value="{{ date.isoformat }}"{% if date.isoformat == selected_date.isoformat %} selected{% endif %}>{{ date }}</option>
                            {% empty %}
                                <option selected>Не знайдено</option>
                            {% endfor %}
                        </select>
                    </div>
                </form>
            </div>

            <div class="col-sm-4"></div>
        </div>

        <div class="row border-bottom border-dark pb-2 fw-bold">
            <div class="col-7">Посилання</div>
            <div class="col-3">Час отримання</div>
            <div class="col-2">Трафік</div>
        </div>

        {% for target in targets %}
            <div class="row border-bottom">
                <div class="col-7 p-2" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                    <a href="{{ target.url }}">{{ target.url }}</a>
                </div>
                <div class="col-3 p-2">{{ target.created_at }}</div>
                <div class="col-2 p-2">{{ target.traffic }}</div>
            </div>
        {% empty %}
            <div class="text-center border-bottom p-2">Не знайдено</div>
        {% endfor %}

    </div>

{% endblock %}
